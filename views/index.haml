!!!
%html
  %head
    %link{ :href => "/styles/fonts.css", :rel => "stylesheet", :type => "text/css" }
    %link{ :href => "/styles/chart.css", :rel => "stylesheet", :type => "text/css" }
    %link{ :rel => "shortcut icon", :href => "http://24.media.tumblr.com/avatar_b25e54a5feb5_16.png" }
    %meta{ :content => "Sam MacCutchan", :name => "author" }
    %title Sam Edward Wilson MacCutchan - sewm.org

  %body
    %h1 Sam Edward Wilson MacCutchan
    
    %form{ :action => "daily_update", :method => "post"}
      %table
        %tr
          %th
            %label{ :for => "date" } Date:
          %th
            %label{ :for => "units" } Units:
          %th
            %label{ :for => "price" } Price: 
        %tr
          %td
            %input{ :id => "date", :name => "date", :type =>"date", :value => @current_time.strftime("%F") }
          %td
            %input{ :type => "number", :name => "units", :min => "0", :step => "0.001", :id =>  "units", :value => @current_units }
          %td
            %input{ :type => "number", :name => "price", :min => "0", :step => "0.0001", :id => "price" }         
        %tr
          %td
            %input{ :type => "submit" }

    %canvas{ :id => "chart", :width => "#{ @prices.length }", :height => "1000" }
    
    %p
        
    %p= @first_date.strftime("%F")
    %p= @last_date.strftime("%F")
    %p Max price is #{ @max_price }
    %p Min price is #{ @min_price }
    %p Max units are #{ @max_units }
    %p Min units are #{ @min_units }
    %p Max value is #{ @max_value }
    %p Min value is #{ @min_value }
    
    %script
      var c=document.getElementById("chart");
      var ctx=c.getContext("2d");
      ctx.fillStyle="#FF0000";
      - (0...@prices.length).each do |i|
        ctx.fillRect(#{ (i + 1) },#{ 1000 - (@prices[i].to_i * 10) },1,1);
      ctx.fillStyle="#00FF00"
      - (0...@units.length).each do |i|
        ctx.fillRect(#{ (i + 1) },#{ 1000 - @units[i].to_i  },2,2);
      ctx.fillStyle="#0000FF"
      - (0...@values.length).each do |i|
        ctx.fillRect(#{ (i + 1) },#{ 1000 - (@values[i].to_i / 10 - 200) },2,2);
      